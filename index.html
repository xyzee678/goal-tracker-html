<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Goal Tracker</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f7fa;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        h2 {
            color: #3498db;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            min-width: 1000px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        tr.sub-goal {
            background-color: #f8fafc;
        }
        
        tr.sub-goal td:first-child {
            padding-left: 40px;
            position: relative;
        }
        
        tr.sub-goal td:first-child::before {
            content: "‚Üí";
            position: absolute;
            left: 20px;
            color: #7f8c8d;
        }
        
        input[type="text"], 
        input[type="number"],
        input[type="date"],
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            background-color: white;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .button-danger {
            background-color: #e74c3c;
        }
        
        .button-danger:hover {
            background-color: #c0392b;
        }
        
        .button-success {
            background-color: #2ecc71;
        }
        
        .button-success:hover {
            background-color: #27ae60;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .progress-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .progress-input input {
            flex: 1;
            max-width: 80px;
        }
        
        .status-pending {
            color: #f39c12;
        }
        
        .status-in-progress {
            color: #3498db;
        }
        
        .status-completed {
            color: #2ecc71;
        }
        
        .status-overdue {
            color: #e74c3c;
        }
        
        .status-behind {
            color: #e67e22;
        }
        
        .status-ontrack {
            color: #27ae60;
        }
        
        .hidden {
            display: none;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 8px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .progress-bar-container {
            width: 100%;
            background-color: #ecf0f1;
            border-radius: 4px;
            margin-top: 5px;
        }
        
        .progress-bar {
            height: 6px;
            border-radius: 4px;
            background-color: #3498db;
        }
        
        .add-subgoal-btn {
            background-color: #9b59b6;
            margin-left: 20px;
        }
        
        .add-subgoal-btn:hover {
            background-color: #8e44ad;
        }
    </style>
</head>
<body>
    <h1>Advanced Goal Tracker</h1>
    
    <div class="section">
        <h2>Goal Tracking Dashboard</h2>
        <table id="goalTable">
            <thead>
                <tr>
                    <th>Goal Name</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>üïí Available Time</th>
                    <th>‚è≥ Time Remaining</th>
                    <th>Follow-up Date</th>
                    <th>Progress Filled</th>
                    <th>‚è±Ô∏è Last Updated</th>
                    <th>Required Progress</th>
                    <th>End Target</th>
                    <th>Unit</th>
                    <th>Repetition</th>
                    <th>Status</th>
                    <th>Progress Rank</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Main Goal 1 -->
                <tr>
                    <td contenteditable="true">‚ûï Walking</td>
                    <td><input type="date" value="2025-06-01"></td>
                    <td><input type="date" value="2025-06-30"></td>
                    <td class="available-time">30 days</td>
                    <td class="time-remaining">22 days</td>
                    <td><input type="date" value="2025-06-08"></td>
                    <td>
                        <div class="progress-input">
                            <input type="number" value="12000" class="progress-value">
                        </div>
                    </td>
                    <td class="last-updated">08-06-2025 09:32 AM</td>
                    <td><input type="number" value="15000"></td>
                    <td><input type="number" value="150000"></td>
                    <td>
                        <select>
                            <option selected>steps</option>
                            <option>miles</option>
                            <option>km</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option selected>Daily</option>
                            <option>Weekly</option>
                            <option>Monthly</option>
                        </select>
                    </td>
                    <td>
                        <select class="status-select">
                            <option value="pending" class="status-pending">Pending</option>
                            <option value="in-progress" class="status-in-progress">In Progress</option>
                            <option value="completed" class="status-completed">Completed</option>
                            <option value="overdue" class="status-overdue">Overdue</option>
                            <option value="behind" selected class="status-behind">‚ö†Ô∏è Behind</option>
                            <option value="ontrack" class="status-ontrack">üöÄ On Track</option>
                        </select>
                    </td>
                    <td>
                        <select class="rank-select">
                            <option>1/10</option>
                            <option>2/10</option>
                            <option>3/10</option>
                            <option>4/10</option>
                            <option>5/10</option>
                            <option>6/10</option>
                            <option>7/10</option>
                            <option selected>8/10</option>
                            <option>9/10</option>
                            <option>10/10</option>
                        </select>
                    </td>
                    <td>
                        <button class="edit-btn">‚úèÔ∏è</button>
                        <button class="delete-btn button-danger">üóëÔ∏è</button>
                        <button class="add-subgoal-btn">‚ûï</button>
                    </td>
                </tr>
                
                <!-- Main Goal 2 with Subgoals -->
                <tr>
                    <td contenteditable="true">‚ûï Writing</td>
                    <td><input type="date" value="2025-06-05"></td>
                    <td><input type="date" value="2025-07-05"></td>
                    <td class="available-time">30 days</td>
                    <td class="time-remaining">27 days</td>
                    <td><input type="date" value="2025-06-10"></td>
                    <td>
                        <div class="progress-input">
                            <input type="number" value="30" class="progress-value">
                        </div>
                    </td>
                    <td class="last-updated">07-06-2025 06:20 PM</td>
                    <td><input type="number" value="30"></td>
                    <td><input type="number" value="120"></td>
                    <td>
                        <select>
                            <option selected>pages</option>
                            <option>words</option>
                            <option>chapters</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option>Daily</option>
                            <option selected>Weekly</option>
                            <option>Monthly</option>
                        </select>
                    </td>
                    <td>
                        <select class="status-select">
                            <option value="completed" selected class="status-completed">‚úÖ Completed</option>
                            <option value="in-progress" class="status-in-progress">In Progress</option>
                            <option value="pending" class="status-pending">Pending</option>
                            <option value="overdue" class="status-overdue">Overdue</option>
                            <option value="behind" class="status-behind">‚ö†Ô∏è Behind</option>
                            <option value="ontrack" class="status-ontrack">üöÄ On Track</option>
                        </select>
                    </td>
                    <td>
                        <select class="rank-select">
                            <option>1/10</option>
                            <option>2/10</option>
                            <option>3/10</option>
                            <option>4/10</option>
                            <option>5/10</option>
                            <option>6/10</option>
                            <option>7/10</option>
                            <option>8/10</option>
                            <option>9/10</option>
                            <option selected>10/10</option>
                        </select>
                    </td>
                    <td>
                        <button class="edit-btn">‚úèÔ∏è</button>
                        <button class="delete-btn button-danger">üóëÔ∏è</button>
                        <button class="add-subgoal-btn">‚ûï</button>
                    </td>
                </tr>
                
                <!-- Subgoals for Writing -->
                <tr class="sub-goal">
                    <td contenteditable="true">Poem</td>
                    <td colspan="2"></td>
                    <td></td>
                    <td></td>
                    <td><input type="date" value="2025-06-06"></td>
                    <td>
                        <div class="progress-input">
                            <input type="number" value="10" class="progress-value">
                        </div>
                    </td>
                    <td class="last-updated">06-06-2025 10:45 AM</td>
                    <td><input type="number" value="10"></td>
                    <td><input type="number" value="40"></td>
                    <td>
                        <select>
                            <option selected>pages</option>
                            <option>words</option>
                            <option>poems</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option>Daily</option>
                            <option selected>Weekly</option>
                            <option>Monthly</option>
                        </select>
                    </td>
                    <td>
                        <select class="status-select">
                            <option value="completed" selected class="status-completed">‚úÖ Completed</option>
                            <option value="in-progress" class="status-in-progress">In Progress</option>
                            <option value="pending" class="status-pending">Pending</option>
                        </select>
                    </td>
                    <td>
                        <select class="rank-select">
                            <option>1/10</option>
                            <option>2/10</option>
                            <option>3/10</option>
                            <option>4/10</option>
                            <option>5/10</option>
                            <option>6/10</option>
                            <option>7/10</option>
                            <option>8/10</option>
                            <option>9/10</option>
                            <option selected>10/10</option>
                        </select>
                    </td>
                    <td>
                        <button class="edit-btn">‚úèÔ∏è</button>
                        <button class="delete-btn button-danger">üóëÔ∏è</button>
                    </td>
                </tr>
                
                <!-- More subgoals would go here -->
                
                <!-- Main Goal 3 -->
                <tr>
                    <td contenteditable="true">‚ûï Reading</td>
                    <td><input type="date" value="2025-06-02"></td>
                    <td><input type="date" value="2025-06-20"></td>
                    <td class="available-time">18 days</td>
                    <td class="time-remaining">12 days</td>
                    <td><input type="date" value="2025-06-12"></td>
                    <td>
                        <div class="progress-input">
                            <input type="number" value="300" class="progress-value">
                        </div>
                    </td>
                    <td class="last-updated">08-06-2025 09:15 AM</td>
                    <td><input type="number" value="600"></td>
                    <td><input type="number" value="1200"></td>
                    <td>
                        <select>
                            <option selected>minutes</option>
                            <option>pages</option>
                            <option>books</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option selected>Daily</option>
                            <option>Weekly</option>
                            <option>Monthly</option>
                        </select>
                    </td>
                    <td>
                        <select class="status-select">
                            <option value="in-progress" selected class="status-in-progress">‚è≥ In Progress</option>
                            <option value="completed" class="status-completed">Completed</option>
                            <option value="pending" class="status-pending">Pending</option>
                            <option value="overdue" class="status-overdue">Overdue</option>
                            <option value="behind" class="status-behind">‚ö†Ô∏è Behind</option>
                            <option value="ontrack" class="status-ontrack">üöÄ On Track</option>
                        </select>
                    </td>
                    <td>
                        <select class="rank-select">
                            <option>1/10</option>
                            <option>2/10</option>
                            <option>3/10</option>
                            <option>4/10</option>
                            <option selected>5/10</option>
                            <option>6/10</option>
                            <option>7/10</option>
                            <option>8/10</option>
                            <option>9/10</option>
                            <option>10/10</option>
                        </select>
                    </td>
                    <td>
                        <button class="edit-btn">‚úèÔ∏è</button>
                        <button class="delete-btn button-danger">üóëÔ∏è</button>
                        <button class="add-subgoal-btn">‚ûï</button>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <div class="button-group">
            <button id="addGoalBtn" class="button-success">‚ûï Add New Main Goal</button>
            <button id="updateAllBtn">üîÑ Update All Time Calculations</button>
            <button id="exportBtn">üì§ Export Data</button>
            <button id="importBtn">üì• Import Data</button>
            <input type="file" id="importFileInput" accept=".json" class="hidden">
        </div>
    </div>
    
    <div class="section">
        <h2>Progress Log</h2>
        <div id="progressLog"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with sample log entries
            const sampleLogs = [
                { goal: "Walking", progress: "12,000 steps", timestamp: "08-06-2025 09:32 AM", status: "‚ö†Ô∏è Behind Schedule", rank: "8/10" },
                { goal: "Writing (Poem)", progress: "10 pages", timestamp: "06-06-2025 10:45 AM", status: "‚úÖ Completed", rank: "10/10" },
                { goal: "Reading", progress: "300 minutes", timestamp: "08-06-2025 09:15 AM", status: "‚è≥ In Progress", rank: "5/10" }
            ];
            
            let logs = [...sampleLogs];
            renderLogs();
            updateAllTimeCalculations();
            
            // Update time calculations for all rows
            function updateAllTimeCalculations() {
                document.querySelectorAll('#goalTable tbody tr:not(.sub-goal)').forEach(row => {
                    updateTimeCalculations(row);
                });
            }
            
            // Calculate time values for a row
            function updateTimeCalculations(row) {
                const startDate = new Date(row.querySelector('input[type="date"]').value);
                const endDate = new Date(row.querySelectorAll('input[type="date"]')[1].value);
                const today = new Date();
                
                // Available time (days between start and end)
                const availableTime = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
                row.querySelector('.available-time').textContent = `${availableTime} days`;
                
                // Time remaining (days between today and end)
                const timeRemaining = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
                row.querySelector('.time-remaining').textContent = `${timeRemaining > 0 ? timeRemaining : 0} days`;
                
                // Auto-update status based on time rem
